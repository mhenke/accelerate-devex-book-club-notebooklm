<!-- Reusable Related Resources Card Component -->
<!-- 
Usage: Supports pipe-separated links (title|url pairs) or YAML data
Parameters:
- icon: FontAwesome icon class (optional)
- title: Card title (required)
- description: Card description (optional)
- links: Pipe-separated "Title|URL" pairs or YAML data array (required)
- theme: color theme (default, culture, technical, books, tools, research)
- custom_class: additional CSS class (optional)
- show_external_icons: show external link icons (optional)
-->

<div class="resource-card {{ include.theme | default: 'default' }}-theme {{ include.custom_class }}" markdown="0">
  <h4>
    {% if include.icon %}<i class="{{ include.icon }}"></i>{% endif %}
    {{ include.title }}
  </h4>
  
  {% if include.description %}
  <p class="resource-description">{{ include.description }}</p>
  {% endif %}
  
  {% if include.links %}
  <ul>
    {% if include.links contains '|' %}
      {% assign links_array = include.links | split: '|' %}
      {% assign link_count = links_array.size %}
      {% assign pairs_count = link_count | divided_by: 2 %}
      {% for i in (0..pairs_count) %}
        {% assign index = i | times: 2 %}
        {% assign next_index = index | plus: 1 %}
        {% if links_array[index] and links_array[next_index] %}
          <li>
            <span aria-hidden="true">•</span>
            <a href="{{ links_array[next_index] | strip }}" target="_blank">
              {{ links_array[index] | strip }}
              {% if include.show_external_icons %}<i class="fas fa-external-link-alt"></i>{% endif %}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    {% else %}
      {% for link in include.links %}
        <li>
          <span aria-hidden="true">•</span>
          <a href="{{ link.url }}" target="_blank">
            {{ link.title }}
            {% if include.show_external_icons %}<i class="fas fa-external-link-alt"></i>{% endif %}
          </a>
          {% if link.description %}<br><small class="link-description">{{ link.description }}</small>{% endif %}
        </li>
      {% endfor %}
    {% endif %}
  </ul>
  {% endif %}
  
  {% if include.content %}{{ include.content }}{% endif %}
</div>

